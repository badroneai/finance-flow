# دليل المستخدم — Finance Flow

دليل مختصر لبدء الاستخدام وتجنب فقدان البيانات.

---

## كيف أبدأ

1. **فتح التطبيق**
   - انقر نقراً مزدوجاً على **`finance-flow.html`** لفتحه بالمتصفح الافتراضي.
   - أو من المتصفح: **ملف → فتح ملف** واختر `finance-flow.html`.
   - يُفضّل استخدام **Chrome** أو **Edge**.

2. **أول تشغيل**
   - يظهر التطبيق ببيانات تجريبية (ديمو) لمساعدتك على التجربة. يمكنك تعديلها أو حذفها لاحقاً من **الإعدادات → إدارة البيانات**.

3. **التنقل**
   - **الرئيسية**: نقطة البداية والوصول السريع إلى لوحة المعلومات والحركات والعمولات والخطابات.
   - **لوحة المعلومات**: ملخص الدخل والخرج والعمولات مع رسم بياني.
   - **الحركات المالية**: إضافة وتعديل وحذف حركات الدخل والخرج مع فلترة وتصدير CSV.
   - **العمولات**: إدارة عمولات الصفقات وحصص المكتب والوكلاء.
   - **الخطابات**: قوالب جاهزة (تعريف، مخاطبة جهة، تفويض) وحفظ مسودات وطباعة.
   - **الإعدادات**: المظهر، الأرقام، معلومات المكتب، النسخ الاحتياطي، وإدارة البيانات.

---

## أين تُحفظ البيانات

- **كل البيانات محفوظة على جهازك فقط** داخل المتصفح (LocalStorage).
- لا يتم إرسال أي حركات أو عمولات أو خطابات إلى أي خادم.
- البيانات مرتبطة ب**نفس المتصفح ونفس الجهاز**. إذا فتحت التطبيق من متصفح آخر أو من جهاز آخر، لن ترى نفس البيانات إلا إذا استوردت نسخة احتياطية.

---

## كيف أسوي نسخة احتياطية

1. ادخل إلى **الإعدادات**.
2. في قسم **النسخ الاحتياطي** اضغط **«تصدير نسخة احتياطية»**.
3. سيتم تنزيل ملف JSON (مثل `finance-flow-backup-2026-02-08.json`) يحتوي كل الحركات والعمولات والمسودات والإعدادات.
4. احفظ الملف في مكان آمن (جهازك أو نسخة سحابية).

**استعادة النسخة لاحقاً:**
- الإعدادات → النسخ الاحتياطي → **«استيراد نسخة احتياطية»** → اختر الملف المُصدَّر.
- ستظهر رسالة تأكيد: **«سيتم استبدال جميع البيانات الحالية. هل أنت متأكد؟»**. الموافقة تعني استبدال كل البيانات الحالية بالنسخة المستوردة ثم إعادة تحميل الصفحة.

يُنصح بتصدير نسخة احتياطية **دورياً** (مثلاً أسبوعياً أو بعد إدخال بيانات مهمة).

---

## تحذيرات مهمة

### وضع التصفح الخاص (Private / Incognito)
- في وضع التصفح الخاص، البيانات تُحفظ **فقط خلال الجلسة**. عند إغلاق النافذة أو التبويب تُحذف كل البيانات.
- لا تستخدم الوضع الخاص إذا تريد الاحتفاظ بالبيانات بعد الإغلاق.

### أجهزة أو حسابات مشتركة
- أي شخص يفتح نفس المتصفح على نفس الجهاز يمكنه رؤية وتعديل كل البيانات (لا يوجد تسجيل دخول).
- **لا يُنصح باستخدام التطبيق على جهاز مشترك** إلا إذا كان الجهاز مخصصاً للمكتب فقط.

### مسح بيانات المتصفح أو الموقع
- إذا قمت بمسح **بيانات الموقع** أو **الكاش** لهذا الموقع، سيتم حذف كل ما حفظه التطبيق (الحركات، العمولات، المسودات، الإعدادات).
- قبل مسح البيانات صدّر نسخة احتياطية إن أردت الاحتفاظ بها.

---

## حلول مشاكل شائعة

### لماذا اختفت بياناتي؟

| السبب المحتمل | ماذا تفعل |
|----------------|-----------|
| **مسح بيانات الموقع أو الكاش** | لا يمكن استرجاع البيانات من التطبيق. إذا كان لديك نسخة احتياطية (ملف JSON)، استخدم «استيراد نسخة احتياطية» من الإعدادات. |
| **وضع التصفح الخاص** | في الوضع الخاص البيانات تُحذف عند إغلاق النافذة. استخدم التصفح العادي وصدّر نسخة احتياطية إذا كنت تحتاج الاحتفاظ بالبيانات. |
| **فتح التطبيق من متصفح أو جهاز آخر** | البيانات محفوظة لكل متصفح/جهاز على حدة. استورد النسخة الاحتياطية من الملف الذي صدّرته سابقاً. |
| **رسالة "فشل الحفظ: مساحة التخزين ممتلئة"** | مساحة التخزين المحلية للموقع ممتلئة. صدّر نسخة احتياطية، ثم احذف بعض البيانات (مثلاً حركات أو مسودات قديمة) أو استخدم «حذف جميع البيانات» ثم استورد النسخة بعد تصفية الملف يدوياً إن لزم. |

### التطبيق لا يفتح أو الصفحة بيضاء
- تأكد من فتح الملف عبر **متصفح حديث** (Chrome أو Edge أو Firefox أو Safari).
- إن ظهرت رسالة «حدث خطأ غير متوقع»، استخدم **«إعادة تحميل التطبيق»**. إن تكرر الخطأ، استخدم **«نسخ تفاصيل الخطأ»** وأرسلها للدعم الفني.

### بعد الاستيراد لا أرى بياناتي
- تأكد أن الملف الذي استوردته هو النسخة التي صدّرتها من Finance Flow (نفس التنسيق). الملفات من إصدارات قديمة أو معدّلة يدوياً قد لا تعمل بشكل صحيح.

---

*الإصدار: v1.0.0 — حزمة release*
